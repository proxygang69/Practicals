<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(to right, #6dd5fa, #ffffff);
      min-height: 100vh;
    }
    .weather-card {
      margin-top: 30px;
      display: none;
    }
  </style>
</head>
<body>

<div class="container text-center py-5">
  <h2 class="mb-4">üå§Ô∏è Weather App</h2>
  
  <!-- Search Form -->
  <div class="row justify-content-center">
    <div class="col-md-6">
      <input type="text" id="cityInput" class="form-control" placeholder="Enter city name">
      <button class="btn btn-primary mt-3 w-100" onclick="fetchWeather()">Get Weather</button>
    </div>
  </div>

  <!-- Weather Result Card -->
  <div class="card weather-card shadow mt-4 mx-auto col-md-6" id="weatherCard">
    <div class="card-body">
      <h4 class="card-title" id="cityName"></h4>
      <p class="card-text">
        <strong>Temperature:</strong> <span id="temperature"></span>¬∞C <br>
        <strong>Humidity:</strong> <span id="humidity"></span>% <br>
        <strong>Condition:</strong> <span id="condition"></span>
      </p>
    </div>
  </div>

  <!-- Error Message -->
  <p class="text-danger mt-3" id="errorMessage"></p>
</div>

<!-- Weather Map as JSON (Local Repository) -->
<script>
  const weatherData = {
    "Pune": { temperature: 32, humidity: 45, condition: "Sunny" },
    "Mumbai": { temperature: 30, humidity: 60, condition: "Humid" },
    "Delhi": { temperature: 28, humidity: 55, condition: "Cloudy" },
    "Bangalore": { temperature: 25, humidity: 65, condition: "Rainy" },
    "Chennai": { temperature: 33, humidity: 70, condition: "Hot" }
  };
</script>

<!-- JavaScript with AJAX Simulation -->
<script>
  function fetchWeather() {
    const city = document.getElementById("cityInput").value.trim();
    const card = document.getElementById("weatherCard");
    const error = document.getElementById("errorMessage");

    // Clear previous output
    card.style.display = "none";
    error.textContent = "";

    // Simulate AJAX request (locally)
    setTimeout(() => {
      const xhr = new XMLHttpRequest();
      xhr.onload = function () {
        const data = JSON.parse(this.responseText);
        if (data[city]) {
          document.getElementById("cityName").textContent = city;
          document.getElementById("temperature").textContent = data[city].temperature;
          document.getElementById("humidity").textContent = data[city].humidity;
          document.getElementById("condition").textContent = data[city].condition;
          card.style.display = "block";
        } else {
          error.textContent = "City not found in local repository.";
        }
      };
      xhr.open("GET", "data:application/json," + encodeURIComponent(JSON.stringify(weatherData)), true);
      xhr.send();
    }, 500); // simulate network delay
  }
</script>

</body>
</html>
